# ES 

### 基础

- JAVA

	当前还是以JDK1.8 版本为基础，推荐是 JDK1.8_73 ;

- 端口

	`./elasticsearch -Ecluster.name=fisherES -Enode.name=FirstNode`
	
	正常的端口是 9200 和 9300 ,前者是Master的节点的接入口，后置估计是管理使用的

- 管理

	ES 所有的管理应当都是通过RestFul的API实现的，比如有些环境情况的监控的功能，应该就是通过API实现的，官方提供了一个界面功能来实现，
正常的情况下也是可以直接通过的api调用实现的。

- 准实时

	ES 是一个搜索引擎，数据到了ES以后，ES需要将数据索引起来，不同于现在的关系型数据库，insert之后会立即的可以查询到，ES是有延迟的，官方给的延迟时间是1s左右；

- Cluster

	簇，算是一个云集群的单位吧。默认的集群的名称是elasticsearch

- node

	一个node节点是仅能属于一个cluster的，
	**问题**：node节点是软件上的节点，并不是物理上的节点，即一个机器上是可以有多个node的进程的，分属于不同的cluster，或者是同一个cluster不同的名称的node进程（可能么？）

- index

	索引，不同于数据库的理念，数据库是有一个数据库实例，然后其中有不同的表，然后表中不同的字段。es只所有是叫index主要是因为其是一个搜索引擎，在一定的成都上看，ES就是一个大的索引的管路工具。整个索引的概念可大可小，可以是一个数据库的概念（主要是因为有type的属性），也可以是一张表的概念，正常的情况下应当是一张表的概念。不过 索引本身对ES而言，应当是一组相同或者是类似数据集合，是需要在这组数据中进行检索的，比如一个文章，整个文章的正文可以是index，但是如果这个文章的评论也是需要检索的话，那就没必要把正文和评论分开建立index，可以是一个index中的2个type。type是逻辑上的；

- type

	类型，是一个逻辑上的概念，同上。一个文章可以拆分成，正文和评论两个不同结构的type，但是都是需要在整个文章的index的主题下面的，因为搜索的中心是index;

- document

	文档，同mongodb基本雷同。但是文档是整个结构中最小或者是最基础的部分。 index ---> type ---> document

- shards and replicas

	分片和备份节点，这2个概念也是软件的概念，一个index可以根据拆分分布的规则，将数据拆分成不同的部分，而每一个部分都可以理解成是一个独立的小index，但是有个思维需要知道，当前的es的shard的个数是先确定的，也就是说在建立一个index的时候需要指定shard的数量，默认的数量是5。而且有个概念需要注意，shard的数量同node的数量 并非是完全的相等的，一台机器上完全是可以有多个shard的，但是为了尽对最大的分布式的计算，还是最好能够分布到不同的机器上，当然整个分布的策略是由ES自己的内部的机制来实现的。

	备份节点，刚建立的index的时候，整个index会被分配成不同的shard，但是的在分配完成之后，是需要给每个shard找个备份的节点的，整个备份的节点就是针对每个shard而言的，默认的情况下一个index是呗拆分成5个shard，每个shard会被分配一个replica分片，而原先的shard分片的就是master的节点。注意master和replica节点是不可以在一个物理机器的上。同时在index建立起来以后，shard的数量是不可以动态的调整的，但是replica的数据量是可以调整的。 
	
	另外的一个限制是需要知晓的，每个index中的document 的数量是有上限的。the limit is 2,147,483,519 (= Integer.MAX_VALUE - 128) documents。

	





